<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script charset="UTF-8" type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0">
    </script>

    <script type="text/javascript">
        function GetMap(zLevel) {
            var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"),
            { credentials: "Ar0aDgj4Y-As2wCE7_iNELR306VP_gqusZtyAipfRhCrJo2_KQn4kyLminHPZbj_",
                center: new Microsoft.Maps.Location(45.5, -122.5),
                mapTypeId: Microsoft.Maps.MapTypeId.aerial,
                zoom: zLevel
            });

            Microsoft.Maps.Events.addHandler(map, 'click', displayEventInfo);

        }
           
        

        function displayEventInfo(e) {
            if (e.targetType == "map") {
            var point = new Microsoft.Maps.Point(e.getX(), e.getY());
            var loc = e.target.tryPixelToLocation(point);
            document.getElementById("textBox").value = loc.latitude + ", " + loc.longitude;
            var latDiv =  document.getElementById("lat").value = loc.latitude;
            var longDiv = document.getElementById("longitude").value = loc.longitude;
            
            }
            }
    </script>


</head>

<body onload="GetMap(20 );">
    @RenderBody()
</body>
</html>
